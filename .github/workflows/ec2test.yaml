name: caller workflow test

on:
  pull_request:
    branches: [main]
    types: [opened, synchronize]
  push:
    branches: [main]
  # push:
  #   branches: [ "main" ]

permissions:
  id-token: write
  contents: read

jobs:
  deploy:
    uses: aisana0131/centralized-workflow/.github/workflows/centralized-workflow.yaml@main
    with:
      working_directory: ./terraform
      # aws_role_arn: ${{ secrets.OIDC_ARN}}
      aws_role_arn: arn:aws:iam::945356073634:role/github-ac-task-terraform-oidc-role
      s3_bucket: ac-task-terraform-state
      s3_key_prefix: ec2
      aws_region: us-east-1
    secrets: inherit
      # AWS_ACCOUNT_ID: ${{ secrets.AWS_ACCOUNT_ID }}

